// Return a function to suppress errors of the types found in the errors array
// args is an optional array of the parameters that will be
// passed to the callback in the event of a suppressed error
module.exports.suppressErrors = function(errors, callback, args) {
    var params = [null].concat(args || []); // prepend null err argument
    return function(err) {
        return callback.apply(this, (err && errors.indexOf(err.code) !== -1) ? params : arguments);
    };
};

// Ensure that callback is called only once
module.exports.callOnce = function(callback) {
    var called = false;
    return function() {
        if (!called) {
            called = true;
            callback.apply(this, arguments);
        }
    };
};
